<VirtualHost *:80>
    ServerName assistdocs.asimo.io
    ServerAdmin admin@asimo.io

    # Document Root - VoiceAssist Documentation
    DocumentRoot /home/asimo/VoiceAssist/docs

    # Directory permissions
    <Directory /home/asimo/VoiceAssist/docs>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted

        # Enable directory listings with custom styling
        IndexOptions FancyIndexing HTMLTable VersionSort NameWidth=* DescriptionWidth=*

        # Set index.html as the default page
        DirectoryIndex index.html
    </Directory>

    # Security Headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"

    # Enable caching for static assets
    <FilesMatch "\.(html|md|css|js|jpg|jpeg|png|gif|ico|svg)$">
        Header set Cache-Control "max-age=3600, public"
    </FilesMatch>

    # Custom MIME types for markdown
    AddType text/markdown .md
    AddType text/plain .yml .yaml .conf

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/assistdocs-error.log
    CustomLog ${APACHE_LOG_DIR}/assistdocs-access.log combined

    # Log real client IP
    LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" proxy
    CustomLog ${APACHE_LOG_DIR}/assistdocs-proxy.log proxy
</VirtualHost>
