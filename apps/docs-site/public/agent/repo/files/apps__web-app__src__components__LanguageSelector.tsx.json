{
  "path": "apps/web-app/src/components/LanguageSelector.tsx",
  "language": "typescript",
  "size": 5075,
  "last_modified": "2025-11-27T06:44:49.506Z",
  "lines": 155,
  "content": "/**\n * Language Selector Component\n * Dropdown for switching between supported languages\n *\n * Phase 9.1: Multi-language support\n */\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { supportedLanguages, type LanguageCode } from \"../i18n\";\n\ninterface LanguageSelectorProps {\n  variant?: \"dropdown\" | \"inline\";\n  className?: string;\n}\n\nexport function LanguageSelector({\n  variant = \"dropdown\",\n  className = \"\",\n}: LanguageSelectorProps) {\n  const { i18n } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const currentLanguage = supportedLanguages.find(\n    (lang) => lang.code === i18n.language,\n  );\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const handleLanguageChange = (langCode: LanguageCode) => {\n    i18n.changeLanguage(langCode);\n    setIsOpen(false);\n\n    // Update document direction\n    document.documentElement.dir =\n      supportedLanguages.find((l) => l.code === langCode)?.dir || \"ltr\";\n    document.documentElement.lang = langCode;\n  };\n\n  if (variant === \"inline\") {\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        {supportedLanguages.map((lang) => (\n          <button\n            key={lang.code}\n            onClick={() => handleLanguageChange(lang.code)}\n            className={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${\n              i18n.language === lang.code\n                ? \"bg-primary-600 text-white\"\n                : \"bg-neutral-100 text-neutral-700 hover:bg-neutral-200\"\n            }`}\n            aria-current={i18n.language === lang.code ? \"true\" : undefined}\n          >\n            {lang.name}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={dropdownRef} className={`relative ${className}`}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-neutral-700 bg-white border border-neutral-300 rounded-md hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"listbox\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth={1.5}\n          stroke=\"currentColor\"\n          className=\"w-5 h-5\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802\"\n          />\n        </svg>\n        <span>{currentLanguage?.name || \"Language\"}</span>\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth={2}\n          stroke=\"currentColor\"\n          className={`w-4 h-4 transition-transform ${isOpen ? \"rotate-180\" : \"\"}`}\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M19.5 8.25l-7.5 7.5-7.5-7.5\"\n          />\n        </svg>\n      </button>\n\n      {isOpen && (\n        <div\n          className=\"absolute z-50 mt-2 w-40 bg-white border border-neutral-200 rounded-md shadow-lg py-1 ltr:right-0 rtl:left-0\"\n          role=\"listbox\"\n        >\n          {supportedLanguages.map((lang) => (\n            <button\n              key={lang.code}\n              onClick={() => handleLanguageChange(lang.code)}\n              className={`w-full px-4 py-2 text-sm text-left hover:bg-neutral-100 flex items-center justify-between ${\n                i18n.language === lang.code\n                  ? \"text-primary-600 font-medium\"\n                  : \"text-neutral-700\"\n              }`}\n              role=\"option\"\n              aria-selected={i18n.language === lang.code}\n            >\n              <span>{lang.name}</span>\n              {i18n.language === lang.code && (\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth={2}\n                  stroke=\"currentColor\"\n                  className=\"w-4 h-4\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M4.5 12.75l6 6 9-13.5\"\n                  />\n                </svg>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"
}
