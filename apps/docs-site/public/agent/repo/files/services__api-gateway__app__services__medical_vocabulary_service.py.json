{
  "path": "services/api-gateway/app/services/medical_vocabulary_service.py",
  "language": "python",
  "size": 23253,
  "last_modified": "2025-12-04T12:32:40.271Z",
  "lines": 811,
  "content": "\"\"\"\nMedical Vocabulary Service - Specialty-Specific Medical Terms\n\nPhase 8: Medical vocabulary management for STT keyword boosting.\n\nFeatures:\n- Specialty-specific term sets (cardiology, oncology, etc.)\n- User-customizable vocabulary\n- Integration with Deepgram keyword boosting\n- Medical abbreviation and terminology management\n\"\"\"\n\nfrom dataclasses import dataclass, field\nfrom enum import Enum\nfrom typing import Dict, List, Optional\n\nfrom app.core.logging import get_logger\n\nlogger = get_logger(__name__)\n\n\n# ==============================================================================\n# Enums\n# ==============================================================================\n\n\nclass MedicalSpecialty(str, Enum):\n    \"\"\"Medical specialties with specific vocabulary.\"\"\"\n\n    GENERAL = \"general\"\n    CARDIOLOGY = \"cardiology\"\n    ONCOLOGY = \"oncology\"\n    NEUROLOGY = \"neurology\"\n    PULMONOLOGY = \"pulmonology\"\n    GASTROENTEROLOGY = \"gastroenterology\"\n    NEPHROLOGY = \"nephrology\"\n    ENDOCRINOLOGY = \"endocrinology\"\n    RHEUMATOLOGY = \"rheumatology\"\n    INFECTIOUS_DISEASE = \"infectious_disease\"\n    PSYCHIATRY = \"psychiatry\"\n    PEDIATRICS = \"pediatrics\"\n    OBSTETRICS = \"obstetrics\"\n    ORTHOPEDICS = \"orthopedics\"\n    DERMATOLOGY = \"dermatology\"\n    OPHTHALMOLOGY = \"ophthalmology\"\n    ENT = \"ent\"\n    UROLOGY = \"urology\"\n    HEMATOLOGY = \"hematology\"\n    EMERGENCY = \"emergency\"\n    PRIMARY_CARE = \"primary_care\"\n\n\n# ==============================================================================\n# Data Classes\n# ==============================================================================\n\n\n@dataclass\nclass MedicalTerm:\n    \"\"\"A medical term with metadata.\"\"\"\n\n    term: str\n    category: str  # diagnosis, medication, procedure, anatomy, etc.\n    specialty: MedicalSpecialty\n    boost_weight: float = 1.0  # Weight for STT boosting (0.5-2.0)\n    pronunciation_hints: List[str] = field(default_factory=list)\n\n\n@dataclass\nclass VocabularySet:\n    \"\"\"A set of medical vocabulary for a specialty.\"\"\"\n\n    specialty: MedicalSpecialty\n    terms: List[MedicalTerm]\n    medications: List[str]\n    diagnoses: List[str]\n    procedures: List[str]\n    anatomy: List[str]\n\n\n@dataclass\nclass UserVocabulary:\n    \"\"\"User-customized vocabulary additions.\"\"\"\n\n    user_id: str\n    custom_terms: List[str]\n    custom_medications: List[str]\n    preferred_abbreviations: Dict[str, str]\n    specialty_weights: Dict[MedicalSpecialty, float]\n\n\n# ==============================================================================\n# Specialty Vocabulary\n# ==============================================================================\n\n\n# Base medical vocabulary (common across specialties)\nBASE_VOCABULARY = {\n    \"medications\": [\n        \"acetaminophen\",\n        \"ibuprofen\",\n        \"aspirin\",\n        \"metformin\",\n        \"lisinopril\",\n        \"amlodipine\",\n        \"atorvastatin\",\n        \"metoprolol\",\n        \"omeprazole\",\n        \"gabapentin\",\n        \"hydrochlorothiazide\",\n        \"losartan\",\n        \"levothyroxine\",\n        \"prednisone\",\n        \"amoxicillin\",\n        \"azithromycin\",\n        \"ciprofloxacin\",\n        \"doxycycline\",\n        \"furosemide\",\n        \"pantoprazole\",\n        \"sertraline\",\n        \"escitalopram\",\n        \"alprazolam\",\n        \"lorazepam\",\n        \"tramadol\",\n        \"oxycodone\",\n        \"hydrocodone\",\n    ],\n    \"diagnoses\": [\n        \"hypertension\",\n        \"diabetes mellitus\",\n        \"hyperlipidemia\",\n        \"obesity\",\n        \"anxiety\",\n        \"depression\",\n        \"insomnia\",\n        \"gastroesophageal reflux\",\n        \"osteoarthritis\",\n        \"chronic kidney disease\",\n        \"coronary artery disease\",\n        \"atrial fibrillation\",\n        \"heart failure\",\n        \"pneumonia\",\n        \"bronchitis\",\n        \"urinary tract infection\",\n        \"cellulitis\",\n        \"hypothyroidism\",\n    ],\n    \"procedures\": [\n        \"electrocardiogram\",\n        \"echocardiogram\",\n        \"colonoscopy\",\n        \"endoscopy\",\n        \"CT scan\",\n        \"MRI\",\n        \"X-ray\",\n        \"ultrasound\",\n        \"biopsy\",\n        \"lumbar puncture\",\n        \"thoracentesis\",\n        \"paracentesis\",\n        \"intubation\",\n        \"catheterization\",\n    ],\n    \"anatomy\": [\n        \"abdomen\",\n        \"chest\",\n        \"extremities\",\n        \"cardiovascular\",\n        \"pulmonary\",\n        \"neurological\",\n        \"musculoskeletal\",\n        \"gastrointestinal\",\n        \"genitourinary\",\n        \"head\",\n        \"neck\",\n        \"thorax\",\n        \"pelvis\",\n        \"spine\",\n    ],\n}\n\n# Specialty-specific vocabulary\nSPECIALTY_VOCABULARY = {\n    MedicalSpecialty.CARDIOLOGY: {\n        \"medications\": [\n            \"nitroglycerin\",\n            \"clopidogrel\",\n            \"warfarin\",\n            \"apixaban\",\n            \"rivaroxaban\",\n            \"digoxin\",\n            \"amiodarone\",\n            \"diltiazem\",\n            \"verapamil\",\n            \"carvedilol\",\n            \"bisoprolol\",\n            \"spironolactone\",\n            \"eplerenone\",\n            \"hydralazine\",\n            \"isosorbide mononitrate\",\n            \"isosorbide dinitrate\",\n            \"prasugrel\",\n            \"ticagrelor\",\n            \"enoxaparin\",\n            \"heparin\",\n        ],\n        \"diagnoses\": [\n            \"myocardial infarction\",\n            \"unstable angina\",\n            \"stable angina\",\n            \"heart failure\",\n            \"cardiomyopathy\",\n            \"pericarditis\",\n            \"endocarditis\",\n            \"aortic stenosis\",\n            \"mitral regurgitation\",\n            \"atrial fibrillation\",\n            \"atrial flutter\",\n            \"ventricular tachycardia\",\n            \"ventricular fibrillation\",\n            \"bradycardia\",\n            \"tachycardia\",\n            \"heart block\",\n            \"sick sinus syndrome\",\n            \"pulmonary hypertension\",\n            \"aortic aneurysm\",\n            \"peripheral vascular disease\",\n        ],\n        \"procedures\": [\n            \"cardiac catheterization\",\n            \"angioplasty\",\n            \"stent placement\",\n            \"pacemaker insertion\",\n            \"defibrillator implantation\",\n            \"ablation\",\n            \"cardioversion\",\n            \"transesophageal echocardiogram\",\n            \"stress test\",\n            \"nuclear stress test\",\n            \"coronary artery bypass\",\n        ],\n        \"terms\": [\n            \"ejection fraction\",\n            \"troponin\",\n            \"BNP\",\n            \"pro-BNP\",\n            \"left ventricle\",\n            \"right ventricle\",\n            \"left atrium\",\n            \"right atrium\",\n            \"aorta\",\n            \"pulmonary artery\",\n            \"inferior vena cava\",\n            \"superior vena cava\",\n            \"interventricular septum\",\n            \"mitral valve\",\n            \"aortic valve\",\n            \"tricuspid valve\",\n            \"pulmonic valve\",\n            \"systolic\",\n            \"diastolic\",\n        ],\n    },\n    MedicalSpecialty.ONCOLOGY: {\n        \"medications\": [\n            \"cyclophosphamide\",\n            \"doxorubicin\",\n            \"cisplatin\",\n            \"carboplatin\",\n            \"paclitaxel\",\n            \"docetaxel\",\n            \"gemcitabine\",\n            \"irinotecan\",\n            \"oxaliplatin\",\n            \"5-fluorouracil\",\n            \"capecitabine\",\n            \"methotrexate\",\n            \"vincristine\",\n            \"rituximab\",\n            \"trastuzumab\",\n            \"bevacizumab\",\n            \"pembrolizumab\",\n            \"nivolumab\",\n            \"ipilimumab\",\n            \"tamoxifen\",\n            \"letrozole\",\n            \"anastrozole\",\n        ],\n        \"diagnoses\": [\n            \"adenocarcinoma\",\n            \"squamous cell carcinoma\",\n            \"lymphoma\",\n            \"leukemia\",\n            \"melanoma\",\n            \"sarcoma\",\n            \"glioblastoma\",\n            \"meningioma\",\n            \"myeloma\",\n            \"breast cancer\",\n            \"lung cancer\",\n            \"colon cancer\",\n            \"prostate cancer\",\n            \"pancreatic cancer\",\n            \"ovarian cancer\",\n            \"cervical cancer\",\n            \"hepatocellular carcinoma\",\n            \"renal cell carcinoma\",\n            \"bladder cancer\",\n        ],\n        \"procedures\": [\n            \"chemotherapy\",\n            \"radiation therapy\",\n            \"immunotherapy\",\n            \"bone marrow biopsy\",\n            \"PET scan\",\n            \"tumor resection\",\n            \"lymph node dissection\",\n            \"port placement\",\n            \"central line insertion\",\n            \"stem cell transplant\",\n        ],\n        \"terms\": [\n            \"metastasis\",\n            \"staging\",\n            \"tumor marker\",\n            \"CA-125\",\n            \"PSA\",\n            \"CEA\",\n            \"AFP\",\n            \"remission\",\n            \"progression\",\n            \"ECOG status\",\n            \"Karnofsky score\",\n            \"neutropenia\",\n            \"thrombocytopenia\",\n            \"anemia\",\n            \"mucositis\",\n        ],\n    },\n    MedicalSpecialty.NEUROLOGY: {\n        \"medications\": [\n            \"levodopa\",\n            \"carbidopa\",\n            \"pramipexole\",\n            \"ropinirole\",\n            \"amantadine\",\n            \"donepezil\",\n            \"memantine\",\n            \"rivastigmine\",\n            \"levetiracetam\",\n            \"valproic acid\",\n            \"carbamazepine\",\n            \"phenytoin\",\n            \"lamotrigine\",\n            \"topiramate\",\n            \"lacosamide\",\n            \"sumatriptan\",\n            \"rizatriptan\",\n            \"botulinum toxin\",\n            \"baclofen\",\n            \"tizanidine\",\n        ],\n        \"diagnoses\": [\n            \"Parkinson's disease\",\n            \"Alzheimer's disease\",\n            \"dementia\",\n            \"epilepsy\",\n            \"multiple sclerosis\",\n            \"amyotrophic lateral sclerosis\",\n            \"myasthenia gravis\",\n            \"Guillain-Barre syndrome\",\n            \"peripheral neuropathy\",\n            \"stroke\",\n            \"transient ischemic attack\",\n            \"migraine\",\n            \"tension headache\",\n            \"cluster headache\",\n            \"trigeminal neuralgia\",\n            \"Bell's palsy\",\n            \"essential tremor\",\n            \"dystonia\",\n        ],\n        \"procedures\": [\n            \"lumbar puncture\",\n            \"EEG\",\n            \"EMG\",\n            \"nerve conduction study\",\n            \"brain MRI\",\n            \"carotid ultrasound\",\n            \"transcranial Doppler\",\n            \"deep brain stimulation\",\n            \"thrombolysis\",\n            \"thrombectomy\",\n        ],\n        \"terms\": [\n            \"cranial nerves\",\n            \"motor function\",\n            \"sensory function\",\n            \"reflexes\",\n            \"gait\",\n            \"coordination\",\n            \"Babinski\",\n            \"Romberg\",\n            \"cerebrospinal fluid\",\n            \"meninges\",\n            \"cerebral cortex\",\n            \"basal ganglia\",\n            \"cerebellum\",\n            \"brainstem\",\n        ],\n    },\n    MedicalSpecialty.PULMONOLOGY: {\n        \"medications\": [\n            \"albuterol\",\n            \"ipratropium\",\n            \"tiotropium\",\n            \"budesonide\",\n            \"fluticasone\",\n            \"montelukast\",\n            \"theophylline\",\n            \"roflumilast\",\n            \"azithromycin\",\n            \"prednisone\",\n            \"methylprednisolone\",\n            \"pirfenidone\",\n            \"nintedanib\",\n        ],\n        \"diagnoses\": [\n            \"asthma\",\n            \"COPD\",\n            \"emphysema\",\n            \"chronic bronchitis\",\n            \"pulmonary fibrosis\",\n            \"pulmonary embolism\",\n            \"pneumonia\",\n            \"tuberculosis\",\n            \"lung cancer\",\n            \"pleural effusion\",\n            \"pneumothorax\",\n            \"pulmonary hypertension\",\n            \"sleep apnea\",\n            \"interstitial lung disease\",\n            \"sarcoidosis\",\n            \"bronchiectasis\",\n        ],\n        \"procedures\": [\n            \"bronchoscopy\",\n            \"thoracentesis\",\n            \"chest tube placement\",\n            \"pulmonary function test\",\n            \"arterial blood gas\",\n            \"CT chest\",\n            \"ventilator management\",\n            \"CPAP\",\n            \"BiPAP\",\n        ],\n        \"terms\": [\n            \"FEV1\",\n            \"FVC\",\n            \"peak flow\",\n            \"oxygen saturation\",\n            \"PaO2\",\n            \"PaCO2\",\n            \"respiratory rate\",\n            \"tidal volume\",\n            \"wheezing\",\n            \"crackles\",\n            \"rhonchi\",\n            \"stridor\",\n            \"dyspnea\",\n            \"orthopnea\",\n            \"paroxysmal nocturnal dyspnea\",\n        ],\n    },\n    MedicalSpecialty.GASTROENTEROLOGY: {\n        \"medications\": [\n            \"omeprazole\",\n            \"pantoprazole\",\n            \"esomeprazole\",\n            \"lansoprazole\",\n            \"famotidine\",\n            \"ranitidine\",\n            \"sucralfate\",\n            \"misoprostol\",\n            \"mesalamine\",\n            \"sulfasalazine\",\n            \"azathioprine\",\n            \"infliximab\",\n            \"adalimumab\",\n            \"vedolizumab\",\n            \"lactulose\",\n            \"rifaximin\",\n        ],\n        \"diagnoses\": [\n            \"gastroesophageal reflux disease\",\n            \"peptic ulcer disease\",\n            \"gastritis\",\n            \"Crohn's disease\",\n            \"ulcerative colitis\",\n            \"irritable bowel syndrome\",\n            \"diverticulitis\",\n            \"celiac disease\",\n            \"hepatitis\",\n            \"cirrhosis\",\n            \"fatty liver disease\",\n            \"pancreatitis\",\n            \"cholecystitis\",\n            \"cholelithiasis\",\n            \"esophageal varices\",\n            \"hepatocellular carcinoma\",\n            \"colon cancer\",\n        ],\n        \"procedures\": [\n            \"esophagogastroduodenoscopy\",\n            \"colonoscopy\",\n            \"ERCP\",\n            \"liver biopsy\",\n            \"paracentesis\",\n            \"endoscopic ultrasound\",\n            \"capsule endoscopy\",\n            \"FibroScan\",\n            \"TIPS procedure\",\n        ],\n        \"terms\": [\n            \"bilirubin\",\n            \"AST\",\n            \"ALT\",\n            \"alkaline phosphatase\",\n            \"albumin\",\n            \"ammonia\",\n            \"INR\",\n            \"ascites\",\n            \"encephalopathy\",\n            \"varices\",\n            \"hepatomegaly\",\n            \"splenomegaly\",\n            \"steatosis\",\n            \"fibrosis\",\n        ],\n    },\n}\n\n\n# ==============================================================================\n# Medical Vocabulary Service\n# ==============================================================================\n\n\nclass MedicalVocabularyService:\n    \"\"\"\n    Service for managing medical vocabulary for STT enhancement.\n\n    Usage:\n        service = MedicalVocabularyService()\n\n        # Get vocabulary for a specialty\n        vocab = service.get_vocabulary(MedicalSpecialty.CARDIOLOGY)\n\n        # Get keywords for Deepgram boosting\n        keywords = service.get_boost_keywords(\n            specialty=MedicalSpecialty.CARDIOLOGY,\n            user_id=\"user-123\",\n        )\n\n        # Add user-specific terms\n        service.add_user_term(\"user-123\", \"lisinopril-hydrochlorothiazide\")\n    \"\"\"\n\n    def __init__(self):\n        self._base_vocabulary = BASE_VOCABULARY\n        self._specialty_vocabulary = SPECIALTY_VOCABULARY\n        self._user_vocabularies: Dict[str, UserVocabulary] = {}\n\n    def get_vocabulary(self, specialty: MedicalSpecialty) -> VocabularySet:\n        \"\"\"\n        Get the full vocabulary set for a specialty.\n\n        Args:\n            specialty: Medical specialty\n\n        Returns:\n            VocabularySet with all terms\n        \"\"\"\n        # Start with base vocabulary\n        medications = list(self._base_vocabulary[\"medications\"])\n        diagnoses = list(self._base_vocabulary[\"diagnoses\"])\n        procedures = list(self._base_vocabulary[\"procedures\"])\n        anatomy = list(self._base_vocabulary[\"anatomy\"])\n\n        # Add specialty-specific terms\n        if specialty in self._specialty_vocabulary:\n            spec_vocab = self._specialty_vocabulary[specialty]\n            medications.extend(spec_vocab.get(\"medications\", []))\n            diagnoses.extend(spec_vocab.get(\"diagnoses\", []))\n            procedures.extend(spec_vocab.get(\"procedures\", []))\n\n        # Create term objects\n        terms = []\n        for med in medications:\n            terms.append(\n                MedicalTerm(\n                    term=med,\n                    category=\"medication\",\n                    specialty=specialty,\n                    boost_weight=1.5,  # Boost medications highly\n                )\n            )\n        for diag in diagnoses:\n            terms.append(\n                MedicalTerm(\n                    term=diag,\n                    category=\"diagnosis\",\n                    specialty=specialty,\n                    boost_weight=1.3,\n                )\n            )\n\n        return VocabularySet(\n            specialty=specialty,\n            terms=terms,\n            medications=medications,\n            diagnoses=diagnoses,\n            procedures=procedures,\n            anatomy=anatomy,\n        )\n\n    def get_boost_keywords(\n        self,\n        specialty: MedicalSpecialty = MedicalSpecialty.GENERAL,\n        user_id: Optional[str] = None,\n        max_keywords: int = 100,\n    ) -> List[Dict[str, any]]:\n        \"\"\"\n        Get keywords formatted for Deepgram keyword boosting.\n\n        Args:\n            specialty: Medical specialty\n            user_id: Optional user ID for custom terms\n            max_keywords: Maximum number of keywords (Deepgram limit is ~100)\n\n        Returns:\n            List of keyword dicts with term and boost weight\n        \"\"\"\n        keywords = []\n\n        # Get specialty vocabulary\n        vocab = self.get_vocabulary(specialty)\n\n        # Add medications with high boost\n        for med in vocab.medications[:30]:\n            keywords.append({\"keyword\": med, \"boost\": 1.5})\n\n        # Add diagnoses\n        for diag in vocab.diagnoses[:30]:\n            keywords.append({\"keyword\": diag, \"boost\": 1.3})\n\n        # Add procedures\n        for proc in vocab.procedures[:20]:\n            keywords.append({\"keyword\": proc, \"boost\": 1.2})\n\n        # Add specialty-specific terms\n        if specialty in self._specialty_vocabulary:\n            spec_terms = self._specialty_vocabulary[specialty].get(\"terms\", [])\n            for term in spec_terms[:20]:\n                keywords.append({\"keyword\": term, \"boost\": 1.4})\n\n        # Add user-specific terms\n        if user_id and user_id in self._user_vocabularies:\n            user_vocab = self._user_vocabularies[user_id]\n            for term in user_vocab.custom_terms:\n                keywords.append({\"keyword\": term, \"boost\": 2.0})  # Highest boost for user terms\n            for med in user_vocab.custom_medications:\n                keywords.append({\"keyword\": med, \"boost\": 2.0})\n\n        # Limit to max_keywords\n        return keywords[:max_keywords]\n\n    def add_user_term(\n        self,\n        user_id: str,\n        term: str,\n        category: str = \"custom\",\n    ) -> None:\n        \"\"\"\n        Add a custom term for a user.\n\n        Args:\n            user_id: User ID\n            term: The term to add\n            category: Term category (medication, diagnosis, custom)\n        \"\"\"\n        if user_id not in self._user_vocabularies:\n            self._user_vocabularies[user_id] = UserVocabulary(\n                user_id=user_id,\n                custom_terms=[],\n                custom_medications=[],\n                preferred_abbreviations={},\n                specialty_weights={},\n            )\n\n        user_vocab = self._user_vocabularies[user_id]\n\n        if category == \"medication\":\n            if term not in user_vocab.custom_medications:\n                user_vocab.custom_medications.append(term)\n        else:\n            if term not in user_vocab.custom_terms:\n                user_vocab.custom_terms.append(term)\n\n        logger.info(f\"Added user term: user={user_id}, term={term}, category={category}\")\n\n    def add_user_abbreviation(\n        self,\n        user_id: str,\n        abbreviation: str,\n        expansion: str,\n    ) -> None:\n        \"\"\"Add a user-specific abbreviation.\"\"\"\n        if user_id not in self._user_vocabularies:\n            self._user_vocabularies[user_id] = UserVocabulary(\n                user_id=user_id,\n                custom_terms=[],\n                custom_medications=[],\n                preferred_abbreviations={},\n                specialty_weights={},\n            )\n\n        self._user_vocabularies[user_id].preferred_abbreviations[abbreviation] = expansion\n        logger.info(f\"Added user abbreviation: user={user_id}, {abbreviation} -> {expansion}\")\n\n    def get_user_vocabulary(self, user_id: str) -> Optional[UserVocabulary]:\n        \"\"\"Get a user's custom vocabulary.\"\"\"\n        return self._user_vocabularies.get(user_id)\n\n    def get_all_medications(\n        self,\n        specialty: Optional[MedicalSpecialty] = None,\n    ) -> List[str]:\n        \"\"\"Get all medication names, optionally filtered by specialty.\"\"\"\n        medications = set(self._base_vocabulary[\"medications\"])\n\n        if specialty:\n            if specialty in self._specialty_vocabulary:\n                medications.update(self._specialty_vocabulary[specialty].get(\"medications\", []))\n        else:\n            for spec_vocab in self._specialty_vocabulary.values():\n                medications.update(spec_vocab.get(\"medications\", []))\n\n        return sorted(medications)\n\n    def get_all_diagnoses(\n        self,\n        specialty: Optional[MedicalSpecialty] = None,\n    ) -> List[str]:\n        \"\"\"Get all diagnosis names, optionally filtered by specialty.\"\"\"\n        diagnoses = set(self._base_vocabulary[\"diagnoses\"])\n\n        if specialty:\n            if specialty in self._specialty_vocabulary:\n                diagnoses.update(self._specialty_vocabulary[specialty].get(\"diagnoses\", []))\n        else:\n            for spec_vocab in self._specialty_vocabulary.values():\n                diagnoses.update(spec_vocab.get(\"diagnoses\", []))\n\n        return sorted(diagnoses)\n\n    def search_terms(\n        self,\n        query: str,\n        specialty: Optional[MedicalSpecialty] = None,\n        limit: int = 10,\n    ) -> List[str]:\n        \"\"\"\n        Search for medical terms matching a query.\n\n        Args:\n            query: Search query\n            specialty: Optional specialty filter\n            limit: Maximum results\n\n        Returns:\n            List of matching terms\n        \"\"\"\n        query_lower = query.lower()\n        matches = []\n\n        # Search medications\n        for med in self.get_all_medications(specialty):\n            if query_lower in med.lower():\n                matches.append(med)\n\n        # Search diagnoses\n        for diag in self.get_all_diagnoses(specialty):\n            if query_lower in diag.lower():\n                matches.append(diag)\n\n        # Search procedures\n        for proc in self._base_vocabulary[\"procedures\"]:\n            if query_lower in proc.lower():\n                matches.append(proc)\n\n        return matches[:limit]\n\n    def get_specialties(self) -> List[Dict[str, str]]:\n        \"\"\"Get list of available specialties.\"\"\"\n        return [{\"id\": spec.value, \"name\": spec.value.replace(\"_\", \" \").title()} for spec in MedicalSpecialty]\n\n\n# Global service instance\nmedical_vocabulary_service = MedicalVocabularyService()\n"
}
