{
  "path": "apps/admin-panel/src/components/shared/ConfirmDialog.tsx",
  "language": "typescript",
  "size": 4189,
  "last_modified": "2025-11-28T04:58:56.348Z",
  "lines": 140,
  "content": "/**\n * ConfirmDialog - Confirmation dialog for dangerous actions\n */\nimport { ReactNode, useEffect, useRef } from \"react\";\n\ninterface ConfirmDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string | ReactNode;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  variant?: \"danger\" | \"warning\" | \"info\";\n  isLoading?: boolean;\n}\n\nexport function ConfirmDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmLabel = \"Confirm\",\n  cancelLabel = \"Cancel\",\n  variant = \"danger\",\n  isLoading = false,\n}: ConfirmDialogProps) {\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  // Handle escape key\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && !isLoading) {\n        onClose();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscape);\n    return () => document.removeEventListener(\"keydown\", handleEscape);\n  }, [isOpen, isLoading, onClose]);\n\n  // Focus trap\n  useEffect(() => {\n    if (isOpen && dialogRef.current) {\n      const firstFocusable = dialogRef.current.querySelector<HTMLElement>(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])',\n      );\n      firstFocusable?.focus();\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const variantStyles = {\n    danger: {\n      icon: \"⚠️\",\n      iconBg: \"bg-red-900/30\",\n      confirmBtn: \"bg-red-600 hover:bg-red-700 focus:ring-red-500\",\n    },\n    warning: {\n      icon: \"⚡\",\n      iconBg: \"bg-yellow-900/30\",\n      confirmBtn: \"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500\",\n    },\n    info: {\n      icon: \"ℹ️\",\n      iconBg: \"bg-blue-900/30\",\n      confirmBtn: \"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500\",\n    },\n  };\n\n  const styles = variantStyles[variant];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\"\n      onClick={(e) => {\n        if (e.target === e.currentTarget && !isLoading) {\n          onClose();\n        }\n      }}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"confirm-dialog-title\"\n    >\n      <div\n        ref={dialogRef}\n        className=\"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-md w-full\"\n      >\n        <div className=\"p-6\">\n          <div className=\"flex items-start gap-4\">\n            <div\n              className={`flex-shrink-0 w-10 h-10 rounded-full ${styles.iconBg} flex items-center justify-center text-lg`}\n            >\n              {styles.icon}\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <h2\n                id=\"confirm-dialog-title\"\n                className=\"text-lg font-semibold text-slate-100\"\n              >\n                {title}\n              </h2>\n              <div className=\"mt-2 text-sm text-slate-400\">{message}</div>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col-reverse sm:flex-row gap-2 sm:justify-end px-6 pb-6\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={isLoading}\n            className=\"px-4 py-2 text-sm font-medium text-slate-300 bg-slate-800 border border-slate-700 rounded-md hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-900 transition-colors disabled:opacity-50\"\n          >\n            {cancelLabel}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onConfirm}\n            disabled={isLoading}\n            className={`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 transition-colors disabled:opacity-50 ${styles.confirmBtn}`}\n          >\n            {isLoading ? (\n              <span className=\"flex items-center gap-2\">\n                <span className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                Processing...\n              </span>\n            ) : (\n              confirmLabel\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
}
