{
  "path": "apps/admin-panel/src/components/KnowledgeBase.tsx",
  "language": "typescript",
  "size": 4933,
  "last_modified": "2025-11-29T04:26:40.442Z",
  "lines": 123,
  "content": "import { useKnowledgeDocuments } from \"../hooks/useKnowledgeDocuments\";\nimport { useIndexingJobs } from \"../hooks/useIndexingJobs\";\n\nexport function KnowledgeBase() {\n  const { docs, loading: docsLoading } = useKnowledgeDocuments();\n  const { jobs, loading: jobsLoading } = useIndexingJobs();\n\n  return (\n    <section id=\"kb\" className=\"flex-1 p-6 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-base font-semibold text-slate-100\">\n            Knowledge Base\n          </h2>\n          <p className=\"text-xs text-slate-500\">\n            Textbooks, journals, guidelines, and notes indexed for RAG.\n          </p>\n        </div>\n        <button className=\"px-3 py-1.5 text-xs rounded bg-slate-100 text-slate-900 hover:bg-white\">\n          + Upload document\n        </button>\n      </div>\n      <div className=\"grid grid-cols-[minmax(0,3fr)_minmax(0,2fr)] gap-4 text-xs\">\n        <div className=\"bg-slate-950/70 border border-slate-800 rounded-lg overflow-hidden\">\n          <div className=\"px-3 py-2 border-b border-slate-800 flex items-center justify-between\">\n            <div className=\"font-medium text-slate-200 text-xs\">Documents</div>\n            {docsLoading && (\n              <div className=\"text-[10px] text-slate-500\">Loading…</div>\n            )}\n          </div>\n          <table className=\"w-full border-collapse text-[11px]\">\n            <thead className=\"bg-slate-950\">\n              <tr className=\"border-b border-slate-800\">\n                <th className=\"text-left px-3 py-2 text-slate-500 font-normal\">\n                  Name\n                </th>\n                <th className=\"text-left px-3 py-2 text-slate-500 font-normal\">\n                  Type\n                </th>\n                <th className=\"text-left px-3 py-2 text-slate-500 font-normal\">\n                  Version\n                </th>\n                <th className=\"text-left px-3 py-2 text-slate-500 font-normal\">\n                  Status\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {docs.map((d) => (\n                <tr\n                  key={d.id}\n                  className=\"border-b border-slate-900 hover:bg-slate-900\"\n                >\n                  <td className=\"px-3 py-2 text-slate-100\">{d.name}</td>\n                  <td className=\"px-3 py-2 text-slate-400\">{d.type}</td>\n                  <td className=\"px-3 py-2 text-slate-400\">\n                    {d.version ?? \"—\"}\n                  </td>\n                  <td className=\"px-3 py-2\">\n                    {d.indexed ? (\n                      <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-300 border border-emerald-700/60\">\n                        indexed\n                      </span>\n                    ) : (\n                      <span className=\"px-2 py-0.5 rounded-full bg-slate-700/40 text-slate-200 border border-slate-600\">\n                        pending\n                      </span>\n                    )}\n                  </td>\n                </tr>\n              ))}\n              {docs.length === 0 && !docsLoading && (\n                <tr>\n                  <td\n                    className=\"px-3 py-4 text-slate-500 text-center\"\n                    colSpan={4}\n                  >\n                    No documents yet. Upload a PDF or import from Nextcloud.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"bg-slate-950/70 border border-slate-800 rounded-lg overflow-hidden\">\n          <div className=\"px-3 py-2 border-b border-slate-800 flex items-center justify-between\">\n            <div className=\"font-medium text-slate-200 text-xs\">\n              Indexing Jobs\n            </div>\n            {jobsLoading && (\n              <div className=\"text-[10px] text-slate-500\">Loading…</div>\n            )}\n          </div>\n          <div className=\"p-3 space-y-2 text-[11px]\">\n            {jobs.map((j) => (\n              <div\n                key={j.id}\n                className=\"border border-slate-800 rounded px-3 py-2 flex items-center justify-between\"\n              >\n                <div>\n                  <div className=\"text-slate-100 font-medium\">\n                    {j.documentId}\n                  </div>\n                  <div className=\"text-slate-500 text-[10px]\">Job {j.id}</div>\n                </div>\n                <div className=\"text-slate-300 text-[10px] uppercase tracking-wide\">\n                  {j.state}\n                </div>\n              </div>\n            ))}\n            {jobs.length === 0 && !jobsLoading && (\n              <div className=\"text-slate-500 text-[11px]\">\n                No indexing jobs yet. When documents are uploaded, jobs will\n                appear here.\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"
}
