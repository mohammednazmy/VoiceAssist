{
  "path": "apps/web-app/src/components/voice/VoiceTranscriptPreview.tsx",
  "language": "typescript",
  "size": 1976,
  "last_modified": "2025-11-26T07:24:10.922Z",
  "lines": 66,
  "content": "/**\n * VoiceTranscriptPreview\n * Displays live streaming speech-to-text preview while user speaks\n *\n * Features:\n * - Shows partial transcript in real-time as user speaks\n * - Subtle visual styling to indicate \"in progress\" state\n * - Accessible with aria-live for screen readers\n * - Auto-clears when speech completes\n */\n\nexport interface VoiceTranscriptPreviewProps {\n  /** Current partial/streaming transcript text */\n  partialTranscript: string;\n  /** Whether the user is currently speaking */\n  isSpeaking: boolean;\n}\n\nexport function VoiceTranscriptPreview({\n  partialTranscript,\n  isSpeaking,\n}: VoiceTranscriptPreviewProps) {\n  // Only show when speaking and there's partial text\n  if (!isSpeaking || !partialTranscript) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"p-3 bg-blue-50/70 border border-blue-200/50 rounded-lg\"\n      data-testid=\"voice-transcript-preview\"\n    >\n      <div className=\"flex items-start space-x-2\">\n        {/* Listening indicator */}\n        <div className=\"flex items-center space-x-1 flex-shrink-0 mt-0.5\">\n          <span\n            className=\"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse\"\n            aria-hidden=\"true\"\n          />\n          <span className=\"text-xs font-medium text-blue-600\">Listening</span>\n        </div>\n\n        {/* Live transcript with aria-live for accessibility */}\n        <div\n          className=\"flex-1 min-w-0\"\n          role=\"status\"\n          aria-live=\"polite\"\n          aria-atomic=\"false\"\n        >\n          <p\n            className=\"text-sm text-blue-700 italic leading-relaxed\"\n            data-testid=\"partial-transcript-text\"\n          >\n            {partialTranscript}\n            {/* Blinking cursor to indicate more text coming */}\n            <span\n              className=\"inline-block w-0.5 h-4 bg-blue-500 ml-0.5 animate-pulse align-text-bottom\"\n              aria-hidden=\"true\"\n            />\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
}
