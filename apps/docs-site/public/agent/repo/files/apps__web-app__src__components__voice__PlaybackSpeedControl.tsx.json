{
  "path": "apps/web-app/src/components/voice/PlaybackSpeedControl.tsx",
  "language": "typescript",
  "size": 5641,
  "last_modified": "2025-11-27T06:44:49.508Z",
  "lines": 184,
  "content": "/**\n * Playback Speed Control Component\n * Allows users to adjust AI response audio playback speed\n *\n * Phase 9.3: Enhanced Voice Features\n */\n\nimport { useState } from \"react\";\n\nexport type PlaybackSpeed = 0.5 | 0.75 | 1 | 1.25 | 1.5 | 2;\n\ninterface PlaybackSpeedControlProps {\n  /** Current playback speed */\n  speed: PlaybackSpeed;\n  /** Called when speed changes */\n  onSpeedChange: (speed: PlaybackSpeed) => void;\n  /** Whether control is disabled */\n  disabled?: boolean;\n  /** Display variant */\n  variant?: \"buttons\" | \"dropdown\" | \"slider\";\n  /** Custom class name */\n  className?: string;\n}\n\nconst SPEED_OPTIONS: PlaybackSpeed[] = [0.5, 0.75, 1, 1.25, 1.5, 2];\n\nconst SPEED_LABELS: Record<PlaybackSpeed, string> = {\n  0.5: \"0.5x\",\n  0.75: \"0.75x\",\n  1: \"1x\",\n  1.25: \"1.25x\",\n  1.5: \"1.5x\",\n  2: \"2x\",\n};\n\nexport function PlaybackSpeedControl({\n  speed,\n  onSpeedChange,\n  disabled = false,\n  variant = \"buttons\",\n  className = \"\",\n}: PlaybackSpeedControlProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Button variant\n  if (variant === \"buttons\") {\n    return (\n      <div className={`flex items-center space-x-1 ${className}`}>\n        <span className=\"text-xs font-medium text-neutral-600 mr-2\">\n          Speed:\n        </span>\n        {SPEED_OPTIONS.map((s) => (\n          <button\n            key={s}\n            type=\"button\"\n            onClick={() => onSpeedChange(s)}\n            disabled={disabled}\n            className={`px-2 py-1 text-xs font-medium rounded transition-colors ${\n              speed === s\n                ? \"bg-primary-500 text-white\"\n                : \"bg-neutral-100 text-neutral-600 hover:bg-neutral-200\"\n            } disabled:opacity-50 disabled:cursor-not-allowed`}\n          >\n            {SPEED_LABELS[s]}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  // Dropdown variant\n  if (variant === \"dropdown\") {\n    return (\n      <div className={`relative ${className}`}>\n        <button\n          type=\"button\"\n          onClick={() => setIsOpen(!isOpen)}\n          disabled={disabled}\n          className=\"flex items-center space-x-2 px-3 py-2 text-sm bg-white border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n          aria-haspopup=\"listbox\"\n          aria-expanded={isOpen}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth={1.5}\n            stroke=\"currentColor\"\n            className=\"w-4 h-4\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z\"\n            />\n          </svg>\n          <span>{SPEED_LABELS[speed]}</span>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth={2}\n            stroke=\"currentColor\"\n            className={`w-3 h-3 transition-transform ${isOpen ? \"rotate-180\" : \"\"}`}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M19.5 8.25l-7.5 7.5-7.5-7.5\"\n            />\n          </svg>\n        </button>\n\n        {isOpen && (\n          <>\n            <div\n              className=\"fixed inset-0 z-40\"\n              onClick={() => setIsOpen(false)}\n            />\n            <div className=\"absolute right-0 mt-1 w-32 py-1 bg-white border border-neutral-200 rounded-md shadow-lg z-50\">\n              {SPEED_OPTIONS.map((s) => (\n                <button\n                  key={s}\n                  type=\"button\"\n                  onClick={() => {\n                    onSpeedChange(s);\n                    setIsOpen(false);\n                  }}\n                  className={`block w-full px-4 py-2 text-sm text-left hover:bg-neutral-100 ${\n                    speed === s\n                      ? \"bg-primary-50 text-primary-700 font-medium\"\n                      : \"text-neutral-700\"\n                  }`}\n                >\n                  {SPEED_LABELS[s]}\n                  {s === 1 && (\n                    <span className=\"ml-2 text-xs text-neutral-400\">\n                      (Normal)\n                    </span>\n                  )}\n                </button>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  // Slider variant\n  return (\n    <div className={`space-y-2 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <label\n          htmlFor=\"playback-speed-slider\"\n          className=\"text-sm font-medium text-neutral-700\"\n        >\n          Playback Speed\n        </label>\n        <span className=\"text-sm font-semibold text-primary-600\">\n          {SPEED_LABELS[speed]}\n        </span>\n      </div>\n      <input\n        id=\"playback-speed-slider\"\n        type=\"range\"\n        min={0}\n        max={SPEED_OPTIONS.length - 1}\n        step={1}\n        value={SPEED_OPTIONS.indexOf(speed)}\n        onChange={(e) =>\n          onSpeedChange(SPEED_OPTIONS[parseInt(e.target.value, 10)])\n        }\n        disabled={disabled}\n        className=\"w-full h-2 bg-neutral-200 rounded-lg appearance-none cursor-pointer accent-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n      />\n      <div className=\"flex justify-between text-xs text-neutral-400\">\n        <span>0.5x</span>\n        <span>2x</span>\n      </div>\n    </div>\n  );\n}\n"
}
