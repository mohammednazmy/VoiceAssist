{
  "path": "apps/web-app/src/components/PWAPrompt.tsx",
  "language": "typescript",
  "size": 7509,
  "last_modified": "2025-11-29T06:00:05.929Z",
  "lines": 214,
  "content": "/**\n * PWA Prompt Component\n * Shows install and update prompts for the PWA\n *\n * Phase 9.2: PWA Support\n */\n\nimport { usePWA } from \"../hooks/usePWA\";\n\nexport function PWAPrompt() {\n  const {\n    needRefresh,\n    offlineReady,\n    isInstallable,\n    isUpdating,\n    install,\n    refresh,\n    dismiss,\n  } = usePWA();\n\n  // Show update prompt\n  if (needRefresh) {\n    return (\n      <div className=\"fixed bottom-20 left-4 right-4 sm:left-auto sm:right-4 sm:bottom-4 sm:w-96 bg-white dark:bg-neutral-800 rounded-lg shadow-lg border border-neutral-200 dark:border-neutral-700 p-4 z-50\">\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={1.5}\n              stroke=\"currentColor\"\n              className=\"w-6 h-6 text-primary-500\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n              />\n            </svg>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-medium text-neutral-900 dark:text-neutral-100\">\n              Update Available\n            </h3>\n            <p className=\"text-sm text-neutral-600 dark:text-neutral-400 mt-1\">\n              A new version of VoiceAssist is ready. Reload to update.\n            </p>\n            <div className=\"flex space-x-3 mt-3\">\n              <button\n                onClick={refresh}\n                disabled={isUpdating}\n                className=\"flex-1 px-3 py-1.5 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 transition-colors\"\n              >\n                {isUpdating ? \"Updating...\" : \"Update Now\"}\n              </button>\n              <button\n                onClick={dismiss}\n                className=\"px-3 py-1.5 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors\"\n              >\n                Later\n              </button>\n            </div>\n          </div>\n          <button\n            onClick={dismiss}\n            className=\"flex-shrink-0 text-neutral-400 hover:text-neutral-500\"\n            aria-label=\"Dismiss update notice\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={2}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Show offline ready notification\n  if (offlineReady) {\n    return (\n      <div className=\"fixed bottom-20 left-4 right-4 sm:left-auto sm:right-4 sm:bottom-4 sm:w-96 bg-green-50 dark:bg-green-900/30 rounded-lg shadow-lg border border-green-200 dark:border-green-800 p-4 z-50\">\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={1.5}\n              stroke=\"currentColor\"\n              className=\"w-6 h-6 text-green-600 dark:text-green-400\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-medium text-green-800 dark:text-green-200\">\n              Ready for Offline\n            </h3>\n            <p className=\"text-sm text-green-700 dark:text-green-300 mt-1\">\n              VoiceAssist is now available offline.\n            </p>\n          </div>\n          <button\n            onClick={dismiss}\n            className=\"flex-shrink-0 text-green-500 hover:text-green-600\"\n            aria-label=\"Dismiss offline ready notice\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={2}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Show install prompt\n  if (isInstallable) {\n    return (\n      <div className=\"fixed bottom-20 left-4 right-4 sm:left-auto sm:right-4 sm:bottom-4 sm:w-96 bg-white dark:bg-neutral-800 rounded-lg shadow-lg border border-neutral-200 dark:border-neutral-700 p-4 z-50\">\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={1.5}\n              stroke=\"currentColor\"\n              className=\"w-6 h-6 text-primary-500\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3\"\n              />\n            </svg>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-medium text-neutral-900 dark:text-neutral-100\">\n              Install VoiceAssist\n            </h3>\n            <p className=\"text-sm text-neutral-600 dark:text-neutral-400 mt-1\">\n              Add to your home screen for quick access and offline use.\n            </p>\n            <div className=\"flex space-x-3 mt-3\">\n              <button\n                onClick={install}\n                className=\"flex-1 px-3 py-1.5 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors\"\n              >\n                Install\n              </button>\n              <button\n                onClick={dismiss}\n                className=\"px-3 py-1.5 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors\"\n              >\n                Not Now\n              </button>\n            </div>\n          </div>\n          <button\n            onClick={dismiss}\n            className=\"flex-shrink-0 text-neutral-400 hover:text-neutral-500\"\n            aria-label=\"Dismiss install prompt\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={2}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n"
}
