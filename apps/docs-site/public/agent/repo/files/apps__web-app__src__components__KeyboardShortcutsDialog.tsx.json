{
  "path": "apps/web-app/src/components/KeyboardShortcutsDialog.tsx",
  "language": "typescript",
  "size": 5903,
  "last_modified": "2025-11-26T05:28:35.262Z",
  "lines": 202,
  "content": "/**\n * Keyboard Shortcuts Dialog\n * Displays available keyboard shortcuts\n */\n\nimport { useEffect } from \"react\";\n\nexport interface KeyboardShortcutsDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface Shortcut {\n  keys: string[];\n  description: string;\n  category: string;\n}\n\nconst SHORTCUTS: Shortcut[] = [\n  {\n    keys: [\"⌘\", \"K\"],\n    description: \"Focus search\",\n    category: \"Navigation\",\n  },\n  {\n    keys: [\"⌘\", \"N\"],\n    description: \"New conversation\",\n    category: \"Navigation\",\n  },\n  {\n    keys: [\"⌘\", \"⇧\", \"V\"],\n    description: \"Toggle voice mode\",\n    category: \"Voice\",\n  },\n  {\n    keys: [\"Esc\"],\n    description: \"Close voice panel (when open)\",\n    category: \"Voice\",\n  },\n  {\n    keys: [\"⌘\", \"I\"],\n    description: \"Toggle clinical context\",\n    category: \"Clinical\",\n  },\n  {\n    keys: [\"⌘\", \"C\"],\n    description: \"Toggle citations sidebar\",\n    category: \"Citations\",\n  },\n  {\n    keys: [\"⌘\", \"B\"],\n    description: \"Toggle branch sidebar\",\n    category: \"Branching\",\n  },\n  {\n    keys: [\"⌘\", \"⇧\", \"B\"],\n    description: \"Create branch from last message\",\n    category: \"Branching\",\n  },\n  {\n    keys: [\"⌘\", \"/\"],\n    description: \"Show keyboard shortcuts\",\n    category: \"Help\",\n  },\n  {\n    keys: [\"Esc\"],\n    description: \"Close modal / Cancel edit\",\n    category: \"General\",\n  },\n  {\n    keys: [\"↵\"],\n    description: \"Send message\",\n    category: \"Chat\",\n  },\n  {\n    keys: [\"⇧\", \"↵\"],\n    description: \"New line in message\",\n    category: \"Chat\",\n  },\n  {\n    keys: [\"⌘\", \"↵\"],\n    description: \"Save edited message\",\n    category: \"Chat\",\n  },\n];\n\nexport function KeyboardShortcutsDialog({\n  isOpen,\n  onClose,\n}: KeyboardShortcutsDialogProps) {\n  // Close on Escape\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && isOpen) {\n        onClose();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleEscape);\n    return () => window.removeEventListener(\"keydown\", handleEscape);\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  // Group shortcuts by category\n  const categories = Array.from(new Set(SHORTCUTS.map((s) => s.category)));\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\"\n      onClick={onClose}\n      role=\"dialog\"\n      aria-labelledby=\"shortcuts-title\"\n      aria-modal=\"true\"\n    >\n      <div\n        className=\"bg-white dark:bg-neutral-900 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-6 py-4 flex items-center justify-between z-10\">\n          <h2\n            id=\"shortcuts-title\"\n            className=\"text-xl font-semibold text-neutral-900 dark:text-neutral-100\"\n          >\n            Keyboard Shortcuts\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors\"\n            aria-label=\"Close dialog\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={1.5}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5 text-neutral-600 dark:text-neutral-400\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-6 py-4 space-y-6\">\n          {categories.map((category) => (\n            <div key={category}>\n              <h3 className=\"text-sm font-semibold text-neutral-700 dark:text-neutral-300 uppercase tracking-wide mb-3\">\n                {category}\n              </h3>\n              <div className=\"space-y-2\">\n                {SHORTCUTS.filter((s) => s.category === category).map(\n                  (shortcut, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors\"\n                    >\n                      <span className=\"text-sm text-neutral-900 dark:text-neutral-100\">\n                        {shortcut.description}\n                      </span>\n                      <div className=\"flex items-center gap-1\">\n                        {shortcut.keys.map((key, keyIndex) => (\n                          <kbd\n                            key={keyIndex}\n                            className=\"px-2 py-1 text-xs font-semibold text-neutral-700 dark:text-neutral-300 bg-neutral-100 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded shadow-sm\"\n                          >\n                            {key}\n                          </kbd>\n                        ))}\n                      </div>\n                    </div>\n                  ),\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-neutral-50 dark:bg-neutral-800 border-t border-neutral-200 dark:border-neutral-700 px-6 py-3\">\n          <p className=\"text-xs text-neutral-600 dark:text-neutral-400\">\n            <span className=\"font-medium\">Tip:</span> On Windows/Linux, use{\" \"}\n            <kbd className=\"px-1.5 py-0.5 text-xs bg-neutral-200 dark:bg-neutral-700 rounded\">\n              Ctrl\n            </kbd>{\" \"}\n            instead of{\" \"}\n            <kbd className=\"px-1.5 py-0.5 text-xs bg-neutral-200 dark:bg-neutral-700 rounded\">\n              ⌘\n            </kbd>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
}
