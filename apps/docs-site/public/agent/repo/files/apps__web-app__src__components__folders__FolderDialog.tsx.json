{
  "path": "apps/web-app/src/components/folders/FolderDialog.tsx",
  "language": "typescript",
  "size": 6709,
  "last_modified": "2025-11-28T23:07:09.602Z",
  "lines": 226,
  "content": "/**\n * FolderDialog Component\n * Dialog for creating or editing folders\n */\n\nimport { useState, useEffect } from \"react\";\nimport { Button, Input } from \"@voiceassist/ui\";\nimport type { Folder } from \"@voiceassist/types\";\nimport { extractErrorMessage } from \"@voiceassist/types\";\n\ninterface FolderDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (\n    name: string,\n    color?: string | null,\n    icon?: string | null,\n  ) => Promise<void>;\n  folder?: Folder | null;\n  mode: \"create\" | \"edit\";\n}\n\nconst FOLDER_COLORS = [\n  { name: \"Blue\", value: \"#3B82F6\" },\n  { name: \"Green\", value: \"#10B981\" },\n  { name: \"Yellow\", value: \"#F59E0B\" },\n  { name: \"Red\", value: \"#EF4444\" },\n  { name: \"Purple\", value: \"#8B5CF6\" },\n  { name: \"Pink\", value: \"#EC4899\" },\n  { name: \"Gray\", value: \"#6B7280\" },\n];\n\nconst FOLDER_ICONS = [\"üìÅ\", \"üìÇ\", \"üóÇÔ∏è\", \"üìã\", \"üìä\", \"üíº\", \"üè•\", \"‚öïÔ∏è\"];\n\nexport function FolderDialog({\n  isOpen,\n  onClose,\n  onSave,\n  folder,\n  mode,\n}: FolderDialogProps) {\n  const [name, setName] = useState(\"\");\n  const [color, setColor] = useState<string | null>(null);\n  const [icon, setIcon] = useState<string | null>(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (mode === \"edit\" && folder) {\n        setName(folder.name);\n        setColor(folder.color || null);\n        setIcon(folder.icon || null);\n      } else {\n        setName(\"\");\n        setColor(null);\n        setIcon(null);\n      }\n      setError(null);\n    }\n  }, [isOpen, mode, folder]);\n\n  const handleSave = async () => {\n    if (!name.trim()) {\n      setError(\"Folder name is required\");\n      return;\n    }\n\n    setIsSaving(true);\n    setError(null);\n\n    try {\n      await onSave(name.trim(), color, icon);\n      onClose();\n    } catch (err: unknown) {\n      setError(extractErrorMessage(err));\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !isSaving) {\n      handleSave();\n    } else if (e.key === \"Escape\") {\n      onClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div\n        className=\"bg-white rounded-lg shadow-xl w-full max-w-md mx-4\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"folder-dialog-title\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-neutral-200\">\n          <h2\n            id=\"folder-dialog-title\"\n            className=\"text-lg font-semibold text-neutral-900\"\n          >\n            {mode === \"create\" ? \"New Folder\" : \"Edit Folder\"}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-neutral-100 rounded transition-colors\"\n            aria-label=\"Close dialog\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={2}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5 text-neutral-500\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-4\">\n          {/* Folder Name */}\n          <div>\n            <label\n              htmlFor=\"folder-name\"\n              className=\"block text-sm font-medium text-neutral-700 mb-1\"\n            >\n              Folder Name\n            </label>\n            <Input\n              id=\"folder-name\"\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Enter folder name\"\n              className=\"w-full\"\n              autoFocus\n            />\n          </div>\n\n          {/* Color Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\n              Color (Optional)\n            </label>\n            <div className=\"flex gap-2 flex-wrap\">\n              {FOLDER_COLORS.map((c) => (\n                <button\n                  key={c.value}\n                  onClick={() => setColor(color === c.value ? null : c.value)}\n                  className={`w-8 h-8 rounded-full border-2 transition-all ${\n                    color === c.value\n                      ? \"border-neutral-900 scale-110\"\n                      : \"border-transparent hover:scale-105\"\n                  }`}\n                  style={{ backgroundColor: c.value }}\n                  title={c.name}\n                  aria-label={`Select ${c.name} color`}\n                />\n              ))}\n            </div>\n          </div>\n\n          {/* Icon Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\n              Icon (Optional)\n            </label>\n            <div className=\"flex gap-2 flex-wrap\">\n              {FOLDER_ICONS.map((i) => (\n                <button\n                  key={i}\n                  onClick={() => setIcon(icon === i ? null : i)}\n                  className={`w-10 h-10 rounded-md border-2 text-xl transition-all ${\n                    icon === i\n                      ? \"border-primary-500 bg-primary-50 scale-110\"\n                      : \"border-neutral-200 hover:border-neutral-300 hover:scale-105\"\n                  }`}\n                  aria-label={`Select ${i} icon`}\n                >\n                  {i}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"p-3 bg-red-50 border border-red-200 rounded-md\">\n              <p className=\"text-sm text-red-800\">{error}</p>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end gap-3 p-6 border-t border-neutral-200\">\n          <Button onClick={onClose} variant=\"outline\" disabled={isSaving}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSaving || !name.trim()}>\n            {isSaving ? (\n              <>\n                <div className=\"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              <>{mode === \"create\" ? \"Create Folder\" : \"Save Changes\"}</>\n            )}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
}
