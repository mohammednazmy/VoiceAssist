{
  "path": "apps/web-app/src/components/chat/ChatErrorBoundary.tsx",
  "language": "typescript",
  "size": 3502,
  "last_modified": "2025-11-29T04:27:41.404Z",
  "lines": 113,
  "content": "/**\n * ChatErrorBoundary Component\n * Error boundary for chat streaming failures\n */\n\nimport { Component, ErrorInfo, ReactNode } from \"react\";\n\ninterface Props {\n  children: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ChatErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"[ChatErrorBoundary] Caught error:\", error, errorInfo);\n    this.props.onError?.(error, errorInfo);\n  }\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"flex items-center justify-center h-full bg-neutral-50\">\n          <div className=\"max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200\">\n            <div className=\"flex items-center space-x-3 mb-4\">\n              <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-red-100\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth={1.5}\n                  stroke=\"currentColor\"\n                  className=\"w-6 h-6 text-red-600\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"\n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-semibold text-neutral-900\">\n                Chat Error\n              </h3>\n            </div>\n\n            <p className=\"text-sm text-neutral-700 mb-4\">\n              Something went wrong with the chat. Please try refreshing the page\n              or contact support if the problem persists.\n            </p>\n\n            {this.state.error && (\n              <details className=\"mb-4\">\n                <summary className=\"text-sm text-neutral-600 cursor-pointer hover:text-neutral-800\">\n                  Error details\n                </summary>\n                <pre className=\"mt-2 p-3 bg-neutral-100 rounded text-xs text-neutral-800 overflow-auto max-h-32\">\n                  {this.state.error.toString()}\n                </pre>\n              </details>\n            )}\n\n            <div className=\"flex space-x-3\">\n              <button\n                type=\"button\"\n                onClick={this.handleReset}\n                className=\"flex-1 px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 transition-colors\"\n              >\n                Try Again\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => window.location.reload()}\n                className=\"flex-1 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 transition-colors\"\n              >\n                Refresh Page\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n"
}
