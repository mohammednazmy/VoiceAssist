{
  "path": "apps/web-app/src/components/templates/TemplatePicker.tsx",
  "language": "typescript",
  "size": 9696,
  "last_modified": "2025-11-25T09:43:39.264Z",
  "lines": 269,
  "content": "/**\n * TemplatePicker Component\n * Dialog for selecting a template when creating a new conversation\n */\n\nimport { useState, useMemo } from \"react\";\nimport { Button, Input } from \"@voiceassist/ui\";\nimport type { ConversationTemplate } from \"@voiceassist/types\";\n\ninterface TemplatePickerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelect: (template: ConversationTemplate) => void;\n  templates: ConversationTemplate[];\n}\n\nexport function TemplatePicker({\n  isOpen,\n  onClose,\n  onSelect,\n  templates,\n}: TemplatePickerProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n\n  // Get unique categories\n  const categories = useMemo(() => {\n    const cats = new Set(templates.map((t) => t.category || \"General\"));\n    return Array.from(cats).sort();\n  }, [templates]);\n\n  // Filter templates\n  const filteredTemplates = useMemo(() => {\n    let filtered = templates;\n\n    // Filter by category\n    if (selectedCategory) {\n      filtered = filtered.filter((t) => t.category === selectedCategory);\n    }\n\n    // Filter by search query\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (t) =>\n          t.name.toLowerCase().includes(query) ||\n          t.description?.toLowerCase().includes(query) ||\n          t.category?.toLowerCase().includes(query),\n      );\n    }\n\n    // Sort by usage count (most used first), then by name\n    return filtered.sort((a, b) => {\n      if (b.usageCount !== a.usageCount) {\n        return b.usageCount - a.usageCount;\n      }\n      return a.name.localeCompare(b.name);\n    });\n  }, [templates, selectedCategory, searchQuery]);\n\n  const handleSelect = (template: ConversationTemplate) => {\n    onSelect(template);\n    setSearchQuery(\"\");\n    setSelectedCategory(null);\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div\n        className=\"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden flex flex-col\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"template-picker-dialog-title\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-neutral-200\">\n          <div>\n            <h2\n              id=\"template-picker-dialog-title\"\n              className=\"text-lg font-semibold text-neutral-900\"\n            >\n              Choose a Template\n            </h2>\n            <p className=\"text-sm text-neutral-600 mt-1\">\n              Start a new conversation from a saved template\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-neutral-100 rounded transition-colors\"\n            aria-label=\"Close dialog\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={2}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5 text-neutral-500\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Search and Filter */}\n        <div className=\"p-4 border-b border-neutral-200 space-y-3\">\n          {/* Search */}\n          <div className=\"relative\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              strokeWidth={1.5}\n              stroke=\"currentColor\"\n              className=\"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"\n              />\n            </svg>\n            <Input\n              type=\"text\"\n              placeholder=\"Search templates...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 w-full\"\n            />\n          </div>\n\n          {/* Category Filter */}\n          <div className=\"flex gap-2 flex-wrap\">\n            <button\n              onClick={() => setSelectedCategory(null)}\n              className={`px-3 py-1 text-sm rounded-full transition-colors ${\n                selectedCategory === null\n                  ? \"bg-primary-500 text-white\"\n                  : \"bg-neutral-100 text-neutral-700 hover:bg-neutral-200\"\n              }`}\n            >\n              All\n            </button>\n            {categories.map((category) => (\n              <button\n                key={category}\n                onClick={() => setSelectedCategory(category)}\n                className={`px-3 py-1 text-sm rounded-full transition-colors ${\n                  selectedCategory === category\n                    ? \"bg-primary-500 text-white\"\n                    : \"bg-neutral-100 text-neutral-700 hover:bg-neutral-200\"\n                }`}\n              >\n                {category}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Template List */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {filteredTemplates.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-full p-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-neutral-100 flex items-center justify-center\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth={1.5}\n                  stroke=\"currentColor\"\n                  className=\"w-8 h-8 text-neutral-400\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z\"\n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-base font-semibold text-neutral-900 mb-2\">\n                {searchQuery || selectedCategory\n                  ? \"No templates found\"\n                  : \"No templates yet\"}\n              </h3>\n              <p className=\"text-sm text-neutral-600 text-center\">\n                {searchQuery || selectedCategory\n                  ? \"Try adjusting your search or filter\"\n                  : \"Save a conversation as a template to get started\"}\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              {filteredTemplates.map((template) => (\n                <button\n                  key={template.id}\n                  onClick={() => handleSelect(template)}\n                  className=\"p-4 border-2 border-neutral-200 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-all text-left group\"\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {/* Icon */}\n                    <div\n                      className=\"w-10 h-10 rounded-md flex items-center justify-center text-xl shrink-0\"\n                      style={{\n                        backgroundColor: `${template.color}20`,\n                        color: template.color,\n                      }}\n                    >\n                      {template.icon}\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-sm font-semibold text-neutral-900 truncate group-hover:text-primary-700\">\n                        {template.name}\n                      </h3>\n                      {template.description && (\n                        <p className=\"text-xs text-neutral-600 mt-1 line-clamp-2\">\n                          {template.description}\n                        </p>\n                      )}\n                      <div className=\"flex items-center gap-3 mt-2 text-xs text-neutral-500\">\n                        <span className=\"px-2 py-0.5 bg-neutral-100 rounded\">\n                          {template.category}\n                        </span>\n                        <span>{template.messages.length} messages</span>\n                        {template.usageCount > 0 && (\n                          <span>Used {template.usageCount}x</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-between items-center p-4 border-t border-neutral-200\">\n          <p className=\"text-sm text-neutral-600\">\n            {filteredTemplates.length}{\" \"}\n            {filteredTemplates.length === 1 ? \"template\" : \"templates\"}\n          </p>\n          <Button onClick={onClose} variant=\"outline\">\n            Cancel\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
}
