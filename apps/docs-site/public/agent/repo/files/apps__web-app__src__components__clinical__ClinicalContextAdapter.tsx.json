{
  "path": "apps/web-app/src/components/clinical/ClinicalContextAdapter.tsx",
  "language": "typescript",
  "size": 2666,
  "last_modified": "2025-11-29T04:23:40.091Z",
  "lines": 84,
  "content": "/**\n * ClinicalContextAdapter\n * Adapts between backend ClinicalContext types and frontend component interface\n */\n\nimport type {\n  ClinicalContext as BackendClinicalContext,\n  ClinicalContextCreate,\n  ClinicalContextUpdate,\n} from \"@voiceassist/types\";\nimport type { ClinicalContext as FrontendClinicalContext } from \"./ClinicalContextPanel\";\n\n/**\n * Convert backend clinical context to frontend format\n */\nexport function backendToFrontend(\n  backendContext: BackendClinicalContext | null,\n): FrontendClinicalContext {\n  if (!backendContext) {\n    return {};\n  }\n\n  return {\n    demographics: {\n      age: backendContext.age,\n      gender: backendContext.gender,\n      weight: backendContext.weightKg,\n      height: backendContext.heightCm,\n    },\n    chiefComplaint: backendContext.chiefComplaint,\n    problems: backendContext.problems || [],\n    medications: backendContext.medications || [],\n    allergies: backendContext.allergies || [],\n    vitals: {\n      temperature: backendContext.vitals?.temperature,\n      heartRate: backendContext.vitals?.heartRate,\n      bloodPressure: backendContext.vitals?.bloodPressure,\n      respiratoryRate: backendContext.vitals?.respiratoryRate,\n      oxygenSaturation: backendContext.vitals?.spo2,\n    },\n  };\n}\n\n/**\n * Convert frontend clinical context to backend format (for create/update)\n */\nexport function frontendToBackend(\n  frontendContext: FrontendClinicalContext,\n): ClinicalContextCreate | ClinicalContextUpdate {\n  return {\n    age: frontendContext.demographics?.age,\n    gender: frontendContext.demographics?.gender,\n    weightKg: frontendContext.demographics?.weight,\n    heightCm: frontendContext.demographics?.height,\n    chiefComplaint: frontendContext.chiefComplaint,\n    problems: frontendContext.problems,\n    medications: frontendContext.medications,\n    allergies: frontendContext.allergies,\n    vitals: {\n      temperature: frontendContext.vitals?.temperature,\n      heartRate: frontendContext.vitals?.heartRate,\n      bloodPressure: frontendContext.vitals?.bloodPressure,\n      respiratoryRate: frontendContext.vitals?.respiratoryRate,\n      spo2: frontendContext.vitals?.oxygenSaturation,\n    },\n  };\n}\n\n/**\n * Check if frontend context has any data\n */\nexport function hasContextData(context: FrontendClinicalContext): boolean {\n  return Object.keys(context).some((key) => {\n    const value = context[key as keyof FrontendClinicalContext];\n    if (Array.isArray(value)) return value.length > 0;\n    if (typeof value === \"object\" && value !== null) {\n      return Object.values(value).some(\n        (v) => v !== undefined && v !== null && v !== \"\",\n      );\n    }\n    return Boolean(value);\n  });\n}\n"
}
