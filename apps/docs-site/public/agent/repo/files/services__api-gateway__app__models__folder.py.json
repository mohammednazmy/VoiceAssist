{
  "path": "services/api-gateway/app/models/folder.py",
  "language": "python",
  "size": 2610,
  "last_modified": "2025-12-05T03:07:13.131Z",
  "lines": 97,
  "content": "\"\"\"\nConversation folder model for organizing conversations\n\"\"\"\n\nimport uuid\nfrom datetime import datetime\nfrom typing import Optional\n\nfrom app.core.database import Base\nfrom pydantic import BaseModel\nfrom sqlalchemy import Column, DateTime, ForeignKey, String\nfrom sqlalchemy.dialects.postgresql import UUID\nfrom sqlalchemy.orm import relationship\n\n\nclass ConversationFolder(Base):\n    \"\"\"Conversation folder model for organizing conversations\"\"\"\n\n    __tablename__ = \"conversation_folders\"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    user_id = Column(\n        UUID(as_uuid=True),\n        ForeignKey(\"users.id\", ondelete=\"CASCADE\"),\n        nullable=False,\n        index=True,\n    )\n\n    # Folder information\n    name = Column(String(255), nullable=False)\n    color = Column(String(50), nullable=True)  # Hex color for UI\n    icon = Column(String(50), nullable=True)  # Icon name\n    parent_folder_id = Column(\n        UUID(as_uuid=True),\n        ForeignKey(\"conversation_folders.id\", ondelete=\"SET NULL\"),\n        nullable=True,\n        index=True,\n    )\n\n    # Timestamps\n    created_at = Column(DateTime(timezone=True), default=datetime.utcnow, nullable=False)\n\n    # Relationships\n    sessions = relationship(\"Session\", back_populates=\"folder\")\n    parent = relationship(\"ConversationFolder\", remote_side=[id], backref=\"children\")\n\n    def __repr__(self):\n        return f\"<ConversationFolder(id={self.id}, name={self.name}, user_id={self.user_id})>\"\n\n    def to_dict(self):\n        \"\"\"Convert to dictionary\"\"\"\n        return {\n            \"id\": str(self.id),\n            \"user_id\": str(self.user_id),\n            \"name\": self.name,\n            \"color\": self.color,\n            \"icon\": self.icon,\n            \"parent_folder_id\": (str(self.parent_folder_id) if self.parent_folder_id else None),\n            \"created_at\": self.created_at.isoformat() if self.created_at else None,\n        }\n\n\n# Pydantic models for API\n\n\nclass FolderCreate(BaseModel):\n    \"\"\"Create folder\"\"\"\n\n    name: str\n    color: Optional[str] = None\n    icon: Optional[str] = None\n    parent_folder_id: Optional[str] = None\n\n\nclass FolderUpdate(BaseModel):\n    \"\"\"Update folder\"\"\"\n\n    name: Optional[str] = None\n    color: Optional[str] = None\n    icon: Optional[str] = None\n    parent_folder_id: Optional[str] = None\n\n\nclass FolderResponse(BaseModel):\n    \"\"\"Folder response\"\"\"\n\n    id: str\n    user_id: str\n    name: str\n    color: Optional[str] = None\n    icon: Optional[str] = None\n    parent_folder_id: Optional[str] = None\n    created_at: str\n\n    class Config:\n        from_attributes = True\n"
}
