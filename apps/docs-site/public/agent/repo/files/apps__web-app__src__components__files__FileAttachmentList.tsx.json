{
  "path": "apps/web-app/src/components/files/FileAttachmentList.tsx",
  "language": "typescript",
  "size": 4528,
  "last_modified": "2025-11-25T09:43:39.263Z",
  "lines": 152,
  "content": "/**\n * FileAttachmentList Component\n * Display list of attached files with preview and remove options\n */\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { useMemo } from \"react\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { Button } from \"@voiceassist/ui\";\n\nexport interface PendingFile {\n  file: File;\n  id: string;\n  progress?: number;\n  error?: string;\n}\n\ninterface FileAttachmentListProps {\n  files: PendingFile[];\n  onRemove: (fileId: string) => void;\n  disabled?: boolean;\n}\n\nexport function FileAttachmentList({\n  files,\n  onRemove,\n  disabled = false,\n}: FileAttachmentListProps) {\n  const getFileIcon = (file: File): string => {\n    const extension = file.name.split(\".\").pop()?.toLowerCase();\n\n    switch (extension) {\n      case \"pdf\":\n        return \"ðŸ“„\";\n      case \"doc\":\n      case \"docx\":\n        return \"ðŸ“\";\n      case \"txt\":\n      case \"md\":\n        return \"ðŸ“ƒ\";\n      case \"png\":\n      case \"jpg\":\n      case \"jpeg\":\n      case \"gif\":\n        return \"ðŸ–¼ï¸\";\n      default:\n        return \"ðŸ“Ž\";\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return \"0 B\";\n\n    const k = 1024;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\n  };\n\n  const getFilePreview = (file: File): string | null => {\n    // Check if it's an image\n    if (file.type.startsWith(\"image/\")) {\n      return URL.createObjectURL(file);\n    }\n    return null;\n  };\n\n  if (files.length === 0) return null;\n\n  return (\n    <div className=\"space-y-2\">\n      {files.map((pendingFile) => {\n        const previewUrl = getFilePreview(pendingFile.file);\n\n        return (\n          <div\n            key={pendingFile.id}\n            className=\"flex items-center gap-3 p-3 bg-neutral-50 border border-neutral-200 rounded-md group hover:bg-neutral-100 transition-colors\"\n          >\n            {/* Preview/Icon */}\n            <div className=\"shrink-0 w-12 h-12 rounded overflow-hidden bg-neutral-200 flex items-center justify-center\">\n              {previewUrl ? (\n                <img\n                  src={previewUrl}\n                  alt={pendingFile.file.name}\n                  className=\"w-full h-full object-cover\"\n                  onLoad={() => URL.revokeObjectURL(previewUrl)}\n                />\n              ) : (\n                <span className=\"text-2xl\">\n                  {getFileIcon(pendingFile.file)}\n                </span>\n              )}\n            </div>\n\n            {/* File Info */}\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium text-neutral-900 truncate\">\n                {pendingFile.file.name}\n              </p>\n              <p className=\"text-xs text-neutral-500\">\n                {formatFileSize(pendingFile.file.size)}\n              </p>\n\n              {/* Progress Bar */}\n              {pendingFile.progress !== undefined &&\n                pendingFile.progress < 100 && (\n                  <div className=\"mt-2 w-full bg-neutral-200 rounded-full h-1.5 overflow-hidden\">\n                    <div\n                      className=\"bg-primary-500 h-full transition-all duration-300\"\n                      style={{ width: `${pendingFile.progress}%` }}\n                    />\n                  </div>\n                )}\n\n              {/* Error */}\n              {pendingFile.error && (\n                <p className=\"text-xs text-red-600 mt-1\">{pendingFile.error}</p>\n              )}\n            </div>\n\n            {/* Remove Button */}\n            <button\n              onClick={() => onRemove(pendingFile.id)}\n              disabled={disabled}\n              className=\"shrink-0 p-2 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              aria-label={`Remove ${pendingFile.file.name}`}\n              title=\"Remove file\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth={2}\n                stroke=\"currentColor\"\n                className=\"w-4 h-4\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M6 18L18 6M6 6l12 12\"\n                />\n              </svg>\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n"
}
